{"title":"SQL练习题","slug":"SQL","date":"2023-06-13T05:26:22.000Z","updated":"2023-06-14T01:29:04.234Z","comments":true,"path":"api/articles/SQL.json","realPath":null,"excerpt":null,"covers":null,"cover":null,"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\css\\APlayer.min.css\"><script src=\"\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\js\\Meting.min.js\"></script><h2 id=\"🌈1-1-建表\"><a href=\"#🌈1-1-建表\" class=\"headerlink\" title=\"🌈1.1 建表\"></a>🌈1.1 建表</h2><p>🚀🚀🚀 学生表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student(</span><br><span class=\"line\"><span class=\"keyword\">no</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">primary</span> key COMMENT <span class=\"string\">&#x27;学号&#x27;</span>,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">sex <span class=\"type\">char</span>(<span class=\"number\">1</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">birthday <span class=\"type\">DATE</span> COMMENT <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\">class <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) COMMENT <span class=\"string\">&#x27;班级&#x27;</span></span><br><span class=\"line\">) CHARSET<span class=\"operator\">=</span>utf8mb4 comment <span class=\"string\">&#x27;学生表&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>🚀🚀🚀 教师表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> teacher (</span><br><span class=\"line\"><span class=\"keyword\">no</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">PRIMARY</span> KEY COMMENT <span class=\"string\">&#x27;教师编号&#x27;</span>,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">sex <span class=\"type\">VARCHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;性别&#x27;</span>,</span><br><span class=\"line\">birthday <span class=\"type\">DATE</span> COMMENT <span class=\"string\">&#x27;出生日期&#x27;</span>,</span><br><span class=\"line\">profession <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;职称&#x27;</span>,</span><br><span class=\"line\">department <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;部门&#x27;</span></span><br><span class=\"line\">) charset<span class=\"operator\">=</span>utf8mb4 COMMENT <span class=\"string\">&#x27;教师表&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>🚀🚀🚀 课程表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> course (</span><br><span class=\"line\"><span class=\"keyword\">no</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">t_no <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>🚀🚀🚀 成绩表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> score (</span><br><span class=\"line\">s_no <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">c_no <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">degree <span class=\"type\">DECIMAL</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"🌈1-2-插入数据\"><a href=\"#🌈1-2-插入数据\" class=\"headerlink\" title=\"🌈1.2 插入数据\"></a>🌈1.2 插入数据</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 添加学生表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;101&#x27;</span>, <span class=\"string\">&#x27;曾华&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1977-09-01&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;102&#x27;</span>, <span class=\"string\">&#x27;匡明&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1975-10-02&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;王丽&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1976-01-23&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;104&#x27;</span>, <span class=\"string\">&#x27;李军&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1976-02-20&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;王芳&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1975-02-10&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;106&#x27;</span>, <span class=\"string\">&#x27;陆军&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1974-06-03&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;107&#x27;</span>, <span class=\"string\">&#x27;王飘飘&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1976-02-20&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;108&#x27;</span>, <span class=\"string\">&#x27;张全蛋&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1975-02-10&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;赵铁柱&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1974-06-03&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 添加教师表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;804&#x27;</span>, <span class=\"string\">&#x27;李诚&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1958-12-02&#x27;</span>, <span class=\"string\">&#x27;副教授&#x27;</span>, <span class=\"string\">&#x27;计算机系&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;856&#x27;</span>, <span class=\"string\">&#x27;张旭&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1969-03-12&#x27;</span>, <span class=\"string\">&#x27;讲师&#x27;</span>, <span class=\"string\">&#x27;电子工程系&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;825&#x27;</span>, <span class=\"string\">&#x27;王萍&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1972-05-05&#x27;</span>, <span class=\"string\">&#x27;助教&#x27;</span>, <span class=\"string\">&#x27;计算机系&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;831&#x27;</span>, <span class=\"string\">&#x27;刘冰&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1977-08-14&#x27;</span>, <span class=\"string\">&#x27;助教&#x27;</span>, <span class=\"string\">&#x27;电子工程系&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 添加课程表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;计算机导论&#x27;</span>, <span class=\"string\">&#x27;825&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;操作系统&#x27;</span>, <span class=\"string\">&#x27;804&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;数字电路&#x27;</span>, <span class=\"string\">&#x27;856&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;9-888&#x27;</span>, <span class=\"string\">&#x27;高等数学&#x27;</span>, <span class=\"string\">&#x27;831&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 添加添加成绩表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;92&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;86&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;85&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;88&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;75&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;79&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;76&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;68&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;81&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"🐴-2-基础查询\"><a href=\"#🐴-2-基础查询\" class=\"headerlink\" title=\"🐴 2.基础查询\"></a>🐴 2.基础查询</h2><p>🚀 1.查询 student 表的所有行</p>\n<blockquote>\n<p>select * from student</p>\n</blockquote>\n<p>🚀 2.查询 student 表中的 name、sex 和 class 字段的所有行</p>\n<blockquote>\n<p>select name,sex,class from student;</p>\n</blockquote>\n<p>🚀 3.查询 teacher 表中不重复的 department 列</p>\n<blockquote>\n<p>select DISTINCT department from teacher;</p>\n</blockquote>\n<p>🚀 4.查询 score 表中成绩在 50-80 之间的所有行</p>\n<blockquote>\n<p>select * from score where degree BETWEEN 50 and 80;<br>select * from score where degree &gt;&#x3D;50 and degree &lt;&#x3D;80;</p>\n</blockquote>\n<p>🚀 5.查询 score 表中成绩为 85, 86 或 88 的行</p>\n<blockquote>\n<p>select * from score where degree in (85,86,88);<br>select * from score where degree &#x3D;85 or degree&#x3D;86 or degree &#x3D;88;</p>\n</blockquote>\n<p>🚀 6.查询 student 表中 ‘95033’ 班或性别为 ‘女’ 的所有行</p>\n<blockquote>\n<p>select * from student where class&#x3D;95033 or sex &#x3D;’女’;</p>\n</blockquote>\n<p>🚀 7.以 class 降序的方式查询 student 表的所有行</p>\n<blockquote>\n<p>select * from student order by class desc</p>\n</blockquote>\n<p>🚀 8.查询 “95031” 班的学生人数</p>\n<blockquote>\n<p>select * from student where class&#x3D;95031</p>\n</blockquote>\n<p>🚀 9.查询 score 表中的最高分的学生学号和课程编号</p>\n<blockquote>\n<p>select s_no,c_no from score where degree &#x3D; (select max(degree) from score)；<br>select s_no,c_no from score order by degree desc LIMIT 1;</p>\n</blockquote>\n<h2 id=\"🐴-3-分组计算\"><a href=\"#🐴-3-分组计算\" class=\"headerlink\" title=\"🐴 3.分组计算\"></a>🐴 3.分组计算</h2><p>🚀 1. 查询每门课的成绩平均成绩</p>\n<blockquote>\n<p>select c_no,avg(degree) as avg from score group by c_no</p>\n</blockquote>\n<p>🚀 2. 查询 score 表中至少有 2 名学生选修，并以 3 开头的课程的平均分数</p>\n<blockquote>\n<p>select c_no,avg(degree) avg from score group by c_no<br>having count(c_no) &gt;&#x3D;2<br>and c_no like ‘3%’</p>\n</blockquote>\n<blockquote>\n<p>select c_no,avg(degree) avg from score where c_no like ‘3%’<br>group by c_no having count(*) &gt;2</p>\n</blockquote>\n<p>🚀 3. 查询student表中至少有3名男生的class</p>\n<blockquote>\n<p>select class from student where sex &#x3D; ‘男’<br>GROUP BY class<br>having count(*) &gt;3</p>\n</blockquote>\n<h2 id=\"🐴-4-多表关联\"><a href=\"#🐴-4-多表关联\" class=\"headerlink\" title=\"🐴 4.多表关联\"></a>🐴 4.多表关联</h2><p>🚀 1.查询所有学生的 name，以及该学生在 score 表中对应的 c_no 和 degree</p>\n<blockquote>\n<p>select b.<code>c_no</code>,b.<code>degree</code> from student a,score b<br>where a.<code>no</code> &#x3D; b.<code>s_no</code></p>\n</blockquote>\n<p>🚀 2.查询所有任课 ( 在 course 表里有课程 ) 教师的 name 和 department</p>\n<blockquote>\n<p>select m.<code>name</code>,m.<code>department</code> from teacher m,course n<br>where m.<code>no</code> &#x3D; n.<code>t_no</code></p>\n</blockquote>\n<p>🚀 3.查询所有学生的 name 、课程名 ( course 表中的 name ) 和 degree</p>\n<blockquote>\n<p>select a.<code>name</code>,b.<code>name</code> as kecheng,c.<code>degree</code> from student a,course b,score c<br>where a.<code>no</code> &#x3D; c.s_<code>no</code><br>and b.<code>no</code> &#x3D; c.<code>c_no</code></p>\n</blockquote>\n<p>🚀 4.查询所有学生的 no 、课程名称 ( course 表中的 name ) 和成绩 ( score 表中的 degree ) 列</p>\n<blockquote>\n<p>select a.<code>no</code>,b.<code>name</code> as kecheng,c.<code>degree</code> from student a,course b,score c<br>where a.<code>no</code> &#x3D; c.<code>s_no</code><br>and b.<code>no</code> &#x3D; c.<code>c_no</code></p>\n</blockquote>\n<h2 id=\"🐴-5-子查询\"><a href=\"#🐴-5-子查询\" class=\"headerlink\" title=\"🐴 5.子查询\"></a>🐴 5.子查询</h2><p>🚀 1.查询95031班的学生每门课程的平均成绩</p>\n<blockquote>\n<p>select c_no,avg(degree) avg from score<br>where s_no in (select no from student where class&#x3D;95031)<br>group by c_no</p>\n</blockquote>\n<p>🚀 2.查询所有成绩高于 109 号同学的 3-105 课程成绩记录</p>\n<blockquote>\n<p>select * from score where degree &gt; (<br>select degree from score where c_no &#x3D; ‘3-105’ and s_no &#x3D;’109’)</p>\n</blockquote>\n<p>🚀 3.查询 “计算机系” 课程的成绩表</p>\n<blockquote>\n<p>select * from score where c_no in (<br>select no from course where t_no in (<br>select no from teacher where department &#x3D;’计算机系’<br>)<br>)</p>\n</blockquote>\n<p>🚀 4.查询某选修课程多于 5 个同学的教师姓名</p>\n<blockquote>\n<p>select name from teacher where no in<br>(<br>select t_no from course where no in (<br>select c_no from score group by c_no HAVING count(*)&gt;5<br>)</p>\n</blockquote>\n<h2 id=\"🐴-6-ANY-x2F-ALL用法\"><a href=\"#🐴-6-ANY-x2F-ALL用法\" class=\"headerlink\" title=\"🐴 6.ANY&#x2F;ALL用法\"></a>🐴 6.ANY&#x2F;ALL用法</h2><p>🚀 1.查询课程3-105且成绩至少高3-245的score信息，成绩降序</p>\n<blockquote>\n<p>SELECT * FROM score<br>WHERE c_no &#x3D; ‘3-105’<br>AND degree &gt;<br>ANY ( SELECT degree FROM score WHERE c_no &#x3D; ‘3-245’ ) order by degree desc</p>\n</blockquote>\n<p>any：表示至少一个，子查询的最小值</p>\n<p>🚀 2.查询课程3-105且成绩高于3-345的score信息</p>\n<blockquote>\n<p>SELECT * FROM score<br>WHERE c_no &#x3D; ‘3-105’<br>AND degree &gt; ALL ( SELECT degree FROM score WHERE c_no &#x3D; ‘3-245’ )</p>\n</blockquote>\n<p>ALL:所有值，子查询最大值</p>\n<h2 id=\"🐴-7-自连接\"><a href=\"#🐴-7-自连接\" class=\"headerlink\" title=\"🐴 7.自连接\"></a>🐴 7.自连接</h2><p>🚀 查询某课程成绩比该课程平均成绩低的score信息</p>\n<blockquote>\n<p>select * from score a where a.<code>degree</code> &lt;<br>(<br>select avg(degree) from score b where a.<code>c_no</code> &#x3D; b.<code>c_no</code><br>)</p>\n</blockquote>\n<h2 id=\"🐴-8-自连接\"><a href=\"#🐴-8-自连接\" class=\"headerlink\" title=\"🐴 8.自连接\"></a>🐴 8.自连接</h2><p>🚀 1 查询studnet表中年龄最大的和年龄最小</p>\n<blockquote>\n<p>select max(birthday),min(birthday) from student</p>\n</blockquote>\n<p>🚀 2 查询student表中每个学生的姓名和年龄</p>\n<blockquote>\n<p>select name,year(now())-YEAR(birthday) as age from student</p>\n</blockquote>\n<p>🚀 3 查询最高分同学的成绩</p>\n<blockquote>\n<p>select * from score where<br>degree &#x3D; (select max(degree) from score)</p>\n</blockquote>\n<p>🚀 4 时间函数</p>\n<blockquote>\n<p>select DAYOFWEEK(now())<br>select DAYOFYEAR(now()); ##返回当年第多少天<br>select HOUR(now()); ##返回时间本周第几天</p>\n</blockquote>\n<blockquote>\n<p>select DAYOFWEEK(now())<br>select DAYOFYEAR(now()); ##返回当年第多少天<br>select HOUR(now()); ##返回时间本周第几天</p>\n</blockquote>\n<h2 id=\"🐴-9-排名统计\"><a href=\"#🐴-9-排名统计\" class=\"headerlink\" title=\"🐴 9.排名统计\"></a>🐴 9.排名统计</h2><p>注：开窗函数只在mysql8.0以上才有<br>🚀 1.scores_tb根据成绩从高到低排序，row_number</p>\n<blockquote>\n<p>select a.<code>xuehao</code>,a.<code>score</code>,<br>row_number() over(order by a.<code>score</code> desc) as row_id<br>from scores_tb a</p>\n</blockquote>\n<p>🚀 2.scores_tb根据成绩从高到低排序，dense_rank无间隔</p>\n<blockquote>\n<p>select a.<code>xuehao</code>,a.<code>score</code>,<br>row_number() over(order by a.<code>score</code> desc) as row_id<br>from scores_tb a</p>\n</blockquote>\n<p>🚀 3.scores_tb根据成绩从高到低排序，RANK有间隔</p>\n<blockquote>\n<p>select a.<code>xuehao</code>,a.<code>score</code>,<br>RANK() over(order by a.<code>score</code> desc) as row_id<br>from scores_tb a</p>\n</blockquote>\n","more":"<h2 id=\"🌈1-1-建表\"><a href=\"#🌈1-1-建表\" class=\"headerlink\" title=\"🌈1.1 建表\"></a>🌈1.1 建表</h2><p>🚀🚀🚀 学生表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student(</span><br><span class=\"line\"><span class=\"keyword\">no</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">primary</span> key COMMENT <span class=\"string\">&#x27;学号&#x27;</span>,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">sex <span class=\"type\">char</span>(<span class=\"number\">1</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">birthday <span class=\"type\">DATE</span> COMMENT <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\">class <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) COMMENT <span class=\"string\">&#x27;班级&#x27;</span></span><br><span class=\"line\">) CHARSET<span class=\"operator\">=</span>utf8mb4 comment <span class=\"string\">&#x27;学生表&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>🚀🚀🚀 教师表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> teacher (</span><br><span class=\"line\"><span class=\"keyword\">no</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">PRIMARY</span> KEY COMMENT <span class=\"string\">&#x27;教师编号&#x27;</span>,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">sex <span class=\"type\">VARCHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;性别&#x27;</span>,</span><br><span class=\"line\">birthday <span class=\"type\">DATE</span> COMMENT <span class=\"string\">&#x27;出生日期&#x27;</span>,</span><br><span class=\"line\">profession <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;职称&#x27;</span>,</span><br><span class=\"line\">department <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;部门&#x27;</span></span><br><span class=\"line\">) charset<span class=\"operator\">=</span>utf8mb4 COMMENT <span class=\"string\">&#x27;教师表&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>🚀🚀🚀 课程表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> course (</span><br><span class=\"line\"><span class=\"keyword\">no</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">t_no <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>🚀🚀🚀 成绩表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> score (</span><br><span class=\"line\">s_no <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">c_no <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">degree <span class=\"type\">DECIMAL</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"🌈1-2-插入数据\"><a href=\"#🌈1-2-插入数据\" class=\"headerlink\" title=\"🌈1.2 插入数据\"></a>🌈1.2 插入数据</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 添加学生表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;101&#x27;</span>, <span class=\"string\">&#x27;曾华&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1977-09-01&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;102&#x27;</span>, <span class=\"string\">&#x27;匡明&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1975-10-02&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;王丽&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1976-01-23&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;104&#x27;</span>, <span class=\"string\">&#x27;李军&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1976-02-20&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;王芳&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1975-02-10&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;106&#x27;</span>, <span class=\"string\">&#x27;陆军&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1974-06-03&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;107&#x27;</span>, <span class=\"string\">&#x27;王飘飘&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1976-02-20&#x27;</span>, <span class=\"string\">&#x27;95033&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;108&#x27;</span>, <span class=\"string\">&#x27;张全蛋&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1975-02-10&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> student <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;赵铁柱&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1974-06-03&#x27;</span>, <span class=\"string\">&#x27;95031&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 添加教师表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;804&#x27;</span>, <span class=\"string\">&#x27;李诚&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1958-12-02&#x27;</span>, <span class=\"string\">&#x27;副教授&#x27;</span>, <span class=\"string\">&#x27;计算机系&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;856&#x27;</span>, <span class=\"string\">&#x27;张旭&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>, <span class=\"string\">&#x27;1969-03-12&#x27;</span>, <span class=\"string\">&#x27;讲师&#x27;</span>, <span class=\"string\">&#x27;电子工程系&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;825&#x27;</span>, <span class=\"string\">&#x27;王萍&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1972-05-05&#x27;</span>, <span class=\"string\">&#x27;助教&#x27;</span>, <span class=\"string\">&#x27;计算机系&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> teacher <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;831&#x27;</span>, <span class=\"string\">&#x27;刘冰&#x27;</span>, <span class=\"string\">&#x27;女&#x27;</span>, <span class=\"string\">&#x27;1977-08-14&#x27;</span>, <span class=\"string\">&#x27;助教&#x27;</span>, <span class=\"string\">&#x27;电子工程系&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 添加课程表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;计算机导论&#x27;</span>, <span class=\"string\">&#x27;825&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;操作系统&#x27;</span>, <span class=\"string\">&#x27;804&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;数字电路&#x27;</span>, <span class=\"string\">&#x27;856&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> course <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;9-888&#x27;</span>, <span class=\"string\">&#x27;高等数学&#x27;</span>, <span class=\"string\">&#x27;831&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 添加添加成绩表数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;92&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;86&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;103&#x27;</span>, <span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;85&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;88&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;75&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;105&#x27;</span>, <span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;79&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;3-105&#x27;</span>, <span class=\"string\">&#x27;76&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;3-245&#x27;</span>, <span class=\"string\">&#x27;68&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> score <span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;109&#x27;</span>, <span class=\"string\">&#x27;6-166&#x27;</span>, <span class=\"string\">&#x27;81&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"🐴-2-基础查询\"><a href=\"#🐴-2-基础查询\" class=\"headerlink\" title=\"🐴 2.基础查询\"></a>🐴 2.基础查询</h2><p>🚀 1.查询 student 表的所有行</p>\n<blockquote>\n<p>select * from student</p>\n</blockquote>\n<p>🚀 2.查询 student 表中的 name、sex 和 class 字段的所有行</p>\n<blockquote>\n<p>select name,sex,class from student;</p>\n</blockquote>\n<p>🚀 3.查询 teacher 表中不重复的 department 列</p>\n<blockquote>\n<p>select DISTINCT department from teacher;</p>\n</blockquote>\n<p>🚀 4.查询 score 表中成绩在 50-80 之间的所有行</p>\n<blockquote>\n<p>select * from score where degree BETWEEN 50 and 80;<br>select * from score where degree &gt;&#x3D;50 and degree &lt;&#x3D;80;</p>\n</blockquote>\n<p>🚀 5.查询 score 表中成绩为 85, 86 或 88 的行</p>\n<blockquote>\n<p>select * from score where degree in (85,86,88);<br>select * from score where degree &#x3D;85 or degree&#x3D;86 or degree &#x3D;88;</p>\n</blockquote>\n<p>🚀 6.查询 student 表中 ‘95033’ 班或性别为 ‘女’ 的所有行</p>\n<blockquote>\n<p>select * from student where class&#x3D;95033 or sex &#x3D;’女’;</p>\n</blockquote>\n<p>🚀 7.以 class 降序的方式查询 student 表的所有行</p>\n<blockquote>\n<p>select * from student order by class desc</p>\n</blockquote>\n<p>🚀 8.查询 “95031” 班的学生人数</p>\n<blockquote>\n<p>select * from student where class&#x3D;95031</p>\n</blockquote>\n<p>🚀 9.查询 score 表中的最高分的学生学号和课程编号</p>\n<blockquote>\n<p>select s_no,c_no from score where degree &#x3D; (select max(degree) from score)；<br>select s_no,c_no from score order by degree desc LIMIT 1;</p>\n</blockquote>\n<h2 id=\"🐴-3-分组计算\"><a href=\"#🐴-3-分组计算\" class=\"headerlink\" title=\"🐴 3.分组计算\"></a>🐴 3.分组计算</h2><p>🚀 1. 查询每门课的成绩平均成绩</p>\n<blockquote>\n<p>select c_no,avg(degree) as avg from score group by c_no</p>\n</blockquote>\n<p>🚀 2. 查询 score 表中至少有 2 名学生选修，并以 3 开头的课程的平均分数</p>\n<blockquote>\n<p>select c_no,avg(degree) avg from score group by c_no<br>having count(c_no) &gt;&#x3D;2<br>and c_no like ‘3%’</p>\n</blockquote>\n<blockquote>\n<p>select c_no,avg(degree) avg from score where c_no like ‘3%’<br>group by c_no having count(*) &gt;2</p>\n</blockquote>\n<p>🚀 3. 查询student表中至少有3名男生的class</p>\n<blockquote>\n<p>select class from student where sex &#x3D; ‘男’<br>GROUP BY class<br>having count(*) &gt;3</p>\n</blockquote>\n<h2 id=\"🐴-4-多表关联\"><a href=\"#🐴-4-多表关联\" class=\"headerlink\" title=\"🐴 4.多表关联\"></a>🐴 4.多表关联</h2><p>🚀 1.查询所有学生的 name，以及该学生在 score 表中对应的 c_no 和 degree</p>\n<blockquote>\n<p>select b.<code>c_no</code>,b.<code>degree</code> from student a,score b<br>where a.<code>no</code> &#x3D; b.<code>s_no</code></p>\n</blockquote>\n<p>🚀 2.查询所有任课 ( 在 course 表里有课程 ) 教师的 name 和 department</p>\n<blockquote>\n<p>select m.<code>name</code>,m.<code>department</code> from teacher m,course n<br>where m.<code>no</code> &#x3D; n.<code>t_no</code></p>\n</blockquote>\n<p>🚀 3.查询所有学生的 name 、课程名 ( course 表中的 name ) 和 degree</p>\n<blockquote>\n<p>select a.<code>name</code>,b.<code>name</code> as kecheng,c.<code>degree</code> from student a,course b,score c<br>where a.<code>no</code> &#x3D; c.s_<code>no</code><br>and b.<code>no</code> &#x3D; c.<code>c_no</code></p>\n</blockquote>\n<p>🚀 4.查询所有学生的 no 、课程名称 ( course 表中的 name ) 和成绩 ( score 表中的 degree ) 列</p>\n<blockquote>\n<p>select a.<code>no</code>,b.<code>name</code> as kecheng,c.<code>degree</code> from student a,course b,score c<br>where a.<code>no</code> &#x3D; c.<code>s_no</code><br>and b.<code>no</code> &#x3D; c.<code>c_no</code></p>\n</blockquote>\n<h2 id=\"🐴-5-子查询\"><a href=\"#🐴-5-子查询\" class=\"headerlink\" title=\"🐴 5.子查询\"></a>🐴 5.子查询</h2><p>🚀 1.查询95031班的学生每门课程的平均成绩</p>\n<blockquote>\n<p>select c_no,avg(degree) avg from score<br>where s_no in (select no from student where class&#x3D;95031)<br>group by c_no</p>\n</blockquote>\n<p>🚀 2.查询所有成绩高于 109 号同学的 3-105 课程成绩记录</p>\n<blockquote>\n<p>select * from score where degree &gt; (<br>select degree from score where c_no &#x3D; ‘3-105’ and s_no &#x3D;’109’)</p>\n</blockquote>\n<p>🚀 3.查询 “计算机系” 课程的成绩表</p>\n<blockquote>\n<p>select * from score where c_no in (<br>select no from course where t_no in (<br>select no from teacher where department &#x3D;’计算机系’<br>)<br>)</p>\n</blockquote>\n<p>🚀 4.查询某选修课程多于 5 个同学的教师姓名</p>\n<blockquote>\n<p>select name from teacher where no in<br>(<br>select t_no from course where no in (<br>select c_no from score group by c_no HAVING count(*)&gt;5<br>)</p>\n</blockquote>\n<h2 id=\"🐴-6-ANY-x2F-ALL用法\"><a href=\"#🐴-6-ANY-x2F-ALL用法\" class=\"headerlink\" title=\"🐴 6.ANY&#x2F;ALL用法\"></a>🐴 6.ANY&#x2F;ALL用法</h2><p>🚀 1.查询课程3-105且成绩至少高3-245的score信息，成绩降序</p>\n<blockquote>\n<p>SELECT * FROM score<br>WHERE c_no &#x3D; ‘3-105’<br>AND degree &gt;<br>ANY ( SELECT degree FROM score WHERE c_no &#x3D; ‘3-245’ ) order by degree desc</p>\n</blockquote>\n<p>any：表示至少一个，子查询的最小值</p>\n<p>🚀 2.查询课程3-105且成绩高于3-345的score信息</p>\n<blockquote>\n<p>SELECT * FROM score<br>WHERE c_no &#x3D; ‘3-105’<br>AND degree &gt; ALL ( SELECT degree FROM score WHERE c_no &#x3D; ‘3-245’ )</p>\n</blockquote>\n<p>ALL:所有值，子查询最大值</p>\n<h2 id=\"🐴-7-自连接\"><a href=\"#🐴-7-自连接\" class=\"headerlink\" title=\"🐴 7.自连接\"></a>🐴 7.自连接</h2><p>🚀 查询某课程成绩比该课程平均成绩低的score信息</p>\n<blockquote>\n<p>select * from score a where a.<code>degree</code> &lt;<br>(<br>select avg(degree) from score b where a.<code>c_no</code> &#x3D; b.<code>c_no</code><br>)</p>\n</blockquote>\n<h2 id=\"🐴-8-自连接\"><a href=\"#🐴-8-自连接\" class=\"headerlink\" title=\"🐴 8.自连接\"></a>🐴 8.自连接</h2><p>🚀 1 查询studnet表中年龄最大的和年龄最小</p>\n<blockquote>\n<p>select max(birthday),min(birthday) from student</p>\n</blockquote>\n<p>🚀 2 查询student表中每个学生的姓名和年龄</p>\n<blockquote>\n<p>select name,year(now())-YEAR(birthday) as age from student</p>\n</blockquote>\n<p>🚀 3 查询最高分同学的成绩</p>\n<blockquote>\n<p>select * from score where<br>degree &#x3D; (select max(degree) from score)</p>\n</blockquote>\n<p>🚀 4 时间函数</p>\n<blockquote>\n<p>select DAYOFWEEK(now())<br>select DAYOFYEAR(now()); ##返回当年第多少天<br>select HOUR(now()); ##返回时间本周第几天</p>\n</blockquote>\n<blockquote>\n<p>select DAYOFWEEK(now())<br>select DAYOFYEAR(now()); ##返回当年第多少天<br>select HOUR(now()); ##返回时间本周第几天</p>\n</blockquote>\n<h2 id=\"🐴-9-排名统计\"><a href=\"#🐴-9-排名统计\" class=\"headerlink\" title=\"🐴 9.排名统计\"></a>🐴 9.排名统计</h2><p>注：开窗函数只在mysql8.0以上才有<br>🚀 1.scores_tb根据成绩从高到低排序，row_number</p>\n<blockquote>\n<p>select a.<code>xuehao</code>,a.<code>score</code>,<br>row_number() over(order by a.<code>score</code> desc) as row_id<br>from scores_tb a</p>\n</blockquote>\n<p>🚀 2.scores_tb根据成绩从高到低排序，dense_rank无间隔</p>\n<blockquote>\n<p>select a.<code>xuehao</code>,a.<code>score</code>,<br>row_number() over(order by a.<code>score</code> desc) as row_id<br>from scores_tb a</p>\n</blockquote>\n<p>🚀 3.scores_tb根据成绩从高到低排序，RANK有间隔</p>\n<blockquote>\n<p>select a.<code>xuehao</code>,a.<code>score</code>,<br>RANK() over(order by a.<code>score</code> desc) as row_id<br>from scores_tb a</p>\n</blockquote>\n","categories":[],"tags":[{"name":"SQL","path":"api/tags/SQL.json"}]}