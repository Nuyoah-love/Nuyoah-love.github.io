{"title":"统计代码重复度","slug":"统计代码重复度","date":"2023-07-27T03:42:27.000Z","updated":"2023-07-27T03:50:45.995Z","comments":true,"path":"api/articles/统计代码重复度.json","realPath":null,"excerpt":null,"covers":["/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/1.png","/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/2.png"],"cover":"/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/1.png","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\css\\APlayer.min.css\"><script src=\"\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\js\\Meting.min.js\"></script><h2 id=\"是什么，有什么用\"><a href=\"#是什么，有什么用\" class=\"headerlink\" title=\"是什么，有什么用\"></a>是什么，有什么用</h2><p>​\tjscpd 是一个开源的 js 工具库，用于检测项目的代码重复率，针对复制粘贴的代码尤其有效，支持超过 150 种的源码文件格式。从而进行代码抽离提炼，优化代码，缩小体积,从而增强代码的可维护性、可扩展性和可复用性方面等等。</p>\n<h2 id=\"如何使用\"><a href=\"#如何使用\" class=\"headerlink\" title=\"如何使用\"></a>如何使用</h2><ul>\n<li>安装</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install jscpd -g</span><br></pre></td></tr></table></figure>\n\n<p>查看是否安装成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jscpd -V</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在项目中使用</li>\n</ul>\n<p>在 package.json 中增加 jscpd 配置属性</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;jscpd&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;threshold&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;reporters&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;html&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;console&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;ignore&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;.git&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;node_modules&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;public&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;.husky&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;format&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;javascript&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;typescript&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;absolute&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>输出报告</li>\n</ul>\n<p>项目中业务代码一般会在 src 目录下，所以直接检测该目录，-o report 设置输入报告为根目录下的 report 文件夹中。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jscpd ./src -o <span class=\"string\">&#x27;report&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>如图所示 </p>\n<div align=\"center\">\n  <img src=\"/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/1.png\" alt=\"weappcode\" height=\"500\">\n</div>\n\n\n\n<p>通过 html 文件就可以查看所有的检测报告,可点击详情查看具体的代码。 </p>\n<div align=\"center\">\n  <img src=\"/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/2.png\" alt=\"weappcode\" height=\"600\">\n</div>","more":"<h2 id=\"是什么，有什么用\"><a href=\"#是什么，有什么用\" class=\"headerlink\" title=\"是什么，有什么用\"></a>是什么，有什么用</h2><p>​\tjscpd 是一个开源的 js 工具库，用于检测项目的代码重复率，针对复制粘贴的代码尤其有效，支持超过 150 种的源码文件格式。从而进行代码抽离提炼，优化代码，缩小体积,从而增强代码的可维护性、可扩展性和可复用性方面等等。</p>\n<h2 id=\"如何使用\"><a href=\"#如何使用\" class=\"headerlink\" title=\"如何使用\"></a>如何使用</h2><ul>\n<li>安装</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install jscpd -g</span><br></pre></td></tr></table></figure>\n\n<p>查看是否安装成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jscpd -V</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在项目中使用</li>\n</ul>\n<p>在 package.json 中增加 jscpd 配置属性</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;jscpd&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;threshold&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;reporters&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;html&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;console&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;ignore&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;.git&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;node_modules&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;public&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;.husky&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;format&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;javascript&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;typescript&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;absolute&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>输出报告</li>\n</ul>\n<p>项目中业务代码一般会在 src 目录下，所以直接检测该目录，-o report 设置输入报告为根目录下的 report 文件夹中。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jscpd ./src -o <span class=\"string\">&#x27;report&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>如图所示 </p>\n<div align=\"center\">\n  <img src=\"/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/1.png\" alt=\"weappcode\" height=\"500\">\n</div>\n\n\n\n<p>通过 html 文件就可以查看所有的检测报告,可点击详情查看具体的代码。 </p>\n<div align=\"center\">\n  <img src=\"/2023/07/27/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D%E5%BA%A6/2.png\" alt=\"weappcode\" height=\"600\">\n</div>","categories":[],"tags":[{"name":"-工具","path":"api/tags/-工具.json"}]}